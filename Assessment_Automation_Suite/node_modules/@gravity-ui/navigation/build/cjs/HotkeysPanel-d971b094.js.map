{"version":3,"file":"HotkeysPanel-d971b094.js","sources":["../../../src/components/HotkeysPanel/utils/filterHotkeys.ts","../../../src/components/HotkeysPanel/utils/flattenHotkeyGroups.ts","../../../src/components/HotkeysPanel/HotkeysPanel.tsx"],"sourcesContent":["import type {HotkeysGroup} from '..';\n\nexport function filterHotkeys<T>(hotkeys: HotkeysGroup<T>[], filter: string) {\n    if (filter) {\n        const result = [];\n        const normalizedFilter = filter.toLowerCase();\n\n        for (const hotkeysBlock of hotkeys) {\n            const filteredItems = hotkeysBlock.items.filter((item) =>\n                item.title.toLowerCase().includes(normalizedFilter),\n            );\n            if (filteredItems.length > 0) {\n                result.push({\n                    ...hotkeysBlock,\n                    items: filteredItems,\n                });\n            }\n        }\n\n        return result;\n    }\n\n    return hotkeys;\n}\n","import type {HotkeysGroup, HotkeysListItem} from '../types';\n\nexport function flattenHotkeyGroups<T>(hotkeys: HotkeysGroup<T>[]) {\n    const result: HotkeysListItem[] = [];\n\n    for (const hotkeysGroup of hotkeys) {\n        result.push({\n            title: hotkeysGroup.title,\n            group: true,\n        });\n\n        result.push(...hotkeysGroup.items);\n    }\n\n    return result;\n}\n","import React, {useCallback, useMemo, useState} from 'react';\nimport type {ReactNode} from 'react';\n\nimport {Hotkey, List, TextInput} from '@gravity-ui/uikit';\nimport type {ListProps} from '@gravity-ui/uikit';\n\nimport {Drawer, DrawerItem} from '../Drawer/Drawer';\nimport type {DrawerProps} from '../Drawer/Drawer';\nimport {block} from '../utils/cn';\n\nimport type {HotkeysGroup, HotkeysListItem} from './types';\nimport {filterHotkeys} from './utils/filterHotkeys';\nimport {flattenHotkeyGroups} from './utils/flattenHotkeyGroups';\n\nimport './HotkeysPanel.scss';\n\nconst b = block('hotkeys-panel');\n\nexport type HotkeysPanelProps<T> = {\n    hotkeys: HotkeysGroup<T>[];\n    title?: ReactNode;\n    filterable?: boolean;\n    filterPlaceholder?: string;\n    emptyState?: ReactNode;\n    visible: boolean;\n    onClose?: () => void;\n    className?: string;\n    drawerItemClassName?: string;\n    filterClassName?: string;\n    titleClassName?: string;\n    itemContentClassName?: string;\n    listClassName?: string;\n    leftOffset?: number | string;\n    topOffset?: number | string;\n    preventScrollBody?: DrawerProps['preventScrollBody'];\n} & Omit<\n    ListProps<HotkeysListItem>,\n    | 'items'\n    | 'emptyPlaceholder'\n    | 'className'\n    | 'size'\n    | 'renderItem'\n    | 'filterable'\n    | 'autoFocus'\n    | 'filterPlaceholder'\n    | 'filterClassName'\n    | 'filter'\n    | 'filterItem'\n    | 'onFilterEnd'\n    | 'onFilterUpdate'\n>;\n\nexport function HotkeysPanel<T = {}>({\n    visible,\n    onClose,\n    leftOffset,\n    topOffset,\n    className,\n    drawerItemClassName,\n    filterClassName,\n    titleClassName,\n    listClassName,\n    itemContentClassName,\n    preventScrollBody,\n    hotkeys,\n    itemClassName,\n    filterable = true,\n    filterPlaceholder,\n    title,\n    emptyState,\n    ...listProps\n}: HotkeysPanelProps<T>) {\n    const [filter, setFilter] = useState('');\n\n    const hotkeysList = useMemo(() => {\n        const filteredHotkeys = filterHotkeys(hotkeys, filter);\n        return flattenHotkeyGroups(filteredHotkeys);\n    }, [hotkeys, filter]);\n\n    const renderItem = useCallback(\n        (item: HotkeysListItem) => (\n            <div\n                className={b('item-content', {group: item.group}, itemContentClassName)}\n                key={item.title}\n            >\n                {item.title}\n                {item.value && <Hotkey className={b('hotkey')} value={item.value} />}\n            </div>\n        ),\n        [],\n    );\n\n    const drawerItemContent = (\n        <React.Fragment>\n            <h2 className={b('title', titleClassName)}>{title}</h2>\n            {filterable && (\n                <TextInput\n                    value={filter}\n                    onUpdate={setFilter}\n                    placeholder={filterPlaceholder}\n                    autoFocus\n                    className={b('search', filterClassName)}\n                    hasClear\n                />\n            )}\n            <List<HotkeysListItem>\n                className={b('list', listClassName)}\n                virtualized={false}\n                filterable={false}\n                items={hotkeysList}\n                renderItem={renderItem}\n                itemClassName={b('item', itemClassName)}\n                emptyPlaceholder={emptyState as string}\n                {...listProps}\n            />\n        </React.Fragment>\n    );\n\n    return (\n        <Drawer\n            className={b(null, className)}\n            onVeilClick={onClose}\n            onEscape={onClose}\n            preventScrollBody={preventScrollBody}\n            style={{\n                left: leftOffset,\n                top: topOffset,\n            }}\n        >\n            <DrawerItem\n                id=\"hotkeys\"\n                visible={visible}\n                className={b('drawer-item', drawerItemClassName)}\n                content={drawerItemContent}\n            />\n        </Drawer>\n    );\n}\n"],"names":["block","__rest","useState","useMemo","useCallback","React","Hotkey","TextInput","List","Drawer","DrawerItem"],"mappings":"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"}